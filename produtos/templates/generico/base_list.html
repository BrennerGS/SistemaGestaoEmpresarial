{% extends 'base.html' %}

{% block content %}
{% load custom_filters %}

<div class="container">
    <h2 class="text-center">Lista de {{ model_name }}</h2>
    {% if ActionAdd %}
    <div class="text-right mb-3">
        <a href="{% url ActionAdd.url_name %}" class="btn btn-{{ ActionAdd.cor }}"><i class="{{ ActionAdd.icon }}"></i> {{ ActionAdd.label }}</a>
    </div>
    {% endif %}
    {% if object_list %}
    <div id="lista" style="display: block;">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    {% for field in column_titles %}
                    <th>{{ field }}</th>
                    {% endfor %}
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for object in object_list %}
                <tr>
                    {% for column_title in column_titles %}
                    <td>
                        {% if column_title == 'imagem' %}
                        <img src="/media/{{ object|get_attribute:column_title }}" width="50" alt="Imagem do produto">
                        {% else %}
                        {{ object|get_attribute:column_title|truncatewords:5 }}
                        {% endif %}
                    </td>
                    {% endfor %}
                    <td>
                        {% for action in list_actions %}
                        {% if action %}
                        <a href="{% url action.url_name object.id %}" class="btn btn-{{action.cor}}">
                            {% if action.icon %}
                            <i class="{{action.icon}}"></i>
                            {% endif %}
                            {{action.label}}
                        </a>
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <hr>
    <p style="text-align: center;">Nenhum registro encontrado.</p>
    <hr>
    {% endif %}
</div>

{% endblock %}
